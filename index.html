<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoSort | Next-Gen Waste Sorting</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700;900&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

    <style>
        :root { font-family: 'Poppins', sans-serif; }
        h1, h2, h3, .nav-brand { font-family: 'Outfit', sans-serif; }

        body {
            background: 
                radial-gradient(circle at 15% 30%, #064e3b 0%, transparent 50%),
                radial-gradient(circle at 85% 70%, #1e3a8a 0%, transparent 50%),
                linear-gradient(135deg, #020617, #0f172a);
            background-attachment: fixed;
            min-height: 100vh;
            overflow-x: hidden;
            color: #f8fafc;
        }

        /* Ambient Lights */
        .ambient-light {
            position: fixed;
            border-radius: 50%;
            filter: blur(120px);
            opacity: 0.4;
            z-index: -2;
            animation: pulse-glow 10s infinite alternate;
        }
        .light-1 { width: 40vw; height: 40vw; background: #10b981; top: -10%; left: -10%; }
        .light-2 { width: 30vw; height: 30vw; background: #3b82f6; bottom: -5%; right: -5%; animation-delay: 3s; }

        /* Floating Objects Animation */
        .float-obj {
            position: fixed;
            z-index: -1;
            opacity: 0.15;
            font-size: 4rem;
            animation: drift 20s linear infinite;
        }
        .obj-1 { top: 20%; left: 10%; animation-duration: 25s; }
        .obj-2 { top: 60%; right: 15%; font-size: 6rem; animation-duration: 35s; animation-direction: reverse; }
        .obj-3 { top: 80%; left: 20%; font-size: 3rem; animation-duration: 18s; }

        @keyframes drift {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-40px) rotate(180deg); }
            100% { transform: translateY(0) rotate(360deg); }
        }
        @keyframes pulse-glow {
            0% { transform: scale(1); opacity: 0.3; }
            100% { transform: scale(1.1); opacity: 0.5; }
        }

        /* Premium Glassmorphism */
        .glass-premium {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255,255,255,0.1);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .glass-card:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(16, 185, 129, 0.4);
            box-shadow: 0 15px 30px rgba(16, 185, 129, 0.15);
        }

        /* Bin Colors */
        .blue { background: rgba(59,130,246,0.15); border-color: #3b82f6; color: #60a5fa; box-shadow: 0 0 20px rgba(59,130,246,0.3); }
        .yellow { background: rgba(234,179,8,0.15); border-color: #eab308; color: #fde047; box-shadow: 0 0 20px rgba(234,179,8,0.3); }
        .green { background: rgba(34,197,94,0.15); border-color: #22c55e; color: #86efac; box-shadow: 0 0 20px rgba(34,197,94,0.3); }
        .red { background: rgba(239,68,68,0.15); border-color: #ef4444; color: #fca5a5; box-shadow: 0 0 20px rgba(239,68,68,0.3); }

        #map { height: 400px; border-radius: 1.5rem; z-index: 10; border: 2px solid rgba(255,255,255,0.1); }
        video { object-fit: cover; border: 2px solid rgba(255,255,255,0.1); }
    </style>
</head>

<body class="antialiased selection:bg-emerald-500 selection:text-white">

    <div class="ambient-light light-1"></div>
    <div class="ambient-light light-2"></div>
    
    <div class="float-obj obj-1">üçÉ</div>
    <div class="float-obj obj-2">‚ôªÔ∏è</div>
    <div class="float-obj obj-3">üåø</div>

    <div class="fixed top-6 left-0 right-0 z-50 flex justify-center px-4">
        <nav class="glass-premium rounded-full px-8 py-4 flex justify-between items-center w-full max-w-4xl shadow-2xl">
            <div class="nav-brand text-2xl font-black tracking-wider bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent flex items-center gap-2">
                <span class="text-2xl">üåø</span> EcoSort<span class="text-white">AI</span>
            </div>
            <div class="text-sm font-medium tracking-wide text-emerald-100/70 hidden sm:block">
                Smart Campus Waste System
            </div>
        </nav>
    </div>

    <div class="max-w-6xl mx-auto px-6 pt-36 pb-20 text-center relative z-10">

        <div class="glass-premium rounded-[3rem] p-8 md:p-14 relative overflow-hidden mb-20">
            
            <div class="absolute top-0 left-1/4 right-1/4 h-1 bg-gradient-to-r from-transparent via-emerald-400 to-transparent opacity-50"></div>

            <h1 class="text-5xl md:text-7xl font-black mb-6 tracking-tight">
                 Waste <span class="bg-gradient-to-r from-emerald-300 via-teal-200 to-cyan-300 bg-clip-text text-transparent">Classifier</span>
            </h1>

            <p class="text-slate-300 mb-10 text-lg md:text-xl font-light max-w-2xl mx-auto">
                Point your camera at any waste. EcoSort AI instantly analyzes it and routes you to the precise bin location on campus.
            </p>

            <button id="scanBtn"
                class="group relative inline-flex items-center justify-center px-10 py-5 font-bold text-white rounded-full bg-gradient-to-r from-emerald-600 to-teal-500 overflow-hidden shadow-[0_0_40px_rgba(16,185,129,0.4)] transition-all hover:scale-105 hover:shadow-[0_0_60px_rgba(16,185,129,0.6)] active:scale-95">
                <span class="absolute w-0 h-0 transition-all duration-500 ease-out bg-white rounded-full group-hover:w-full group-hover:h-56 opacity-10"></span>
                <span class="relative flex items-center gap-3 text-xl">üì± Start Camera Scan</span>
            </button>

            <div id="loading" class="inline-flex items-center gap-3 text-emerald-300 font-medium px-6 py-3 rounded-full bg-emerald-900/30 border border-emerald-500/30 mt-6 animate-pulse">
                <svg class="animate-spin h-5 w-5 text-emerald-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                Loading Custom AI Model...
            </div>

            <div id="videoContainer" class="hidden mt-12 animate-fade-in">
                <div class="relative inline-block w-full max-w-md mx-auto group">
                    <div class="absolute -inset-1 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-[2rem] blur opacity-25 group-hover:opacity-40 transition duration-1000"></div>
                    <video id="video" autoplay playsinline muted class="relative w-full rounded-[2rem] shadow-2xl bg-black"></video>
                </div>
                
                <div class="flex flex-wrap justify-center gap-4 mt-8">
                    <button id="classifyBtn" class="px-8 py-4 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 backdrop-blur-md font-semibold text-lg transition-all hover:scale-105 hover:border-emerald-500/50 flex items-center gap-2 shadow-lg">
                        üîç Classify Object
                    </button>
                    <button id="stopBtn" class="px-8 py-4 rounded-full bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 backdrop-blur-md font-semibold text-lg transition-all hover:scale-105 text-red-200 flex items-center gap-2 shadow-lg">
                        ‚èπÔ∏è Stop Camera
                    </button>
                </div>
            </div>

            <div id="result" class="text-3xl md:text-4xl font-bold mt-12 p-8 glass-premium rounded-3xl min-h-[120px] flex items-center justify-center transition-all duration-500 text-slate-400">
                Awaiting scan input...
            </div>
            
            <div id="confidence" class="text-sm font-medium tracking-wide text-emerald-200/70 mt-2 hidden"></div>

            <div id="binColor" class="text-2xl font-bold my-8 p-6 rounded-2xl border-4 hidden transition-all duration-500 transform scale-95 opacity-0"></div>

            <button id="nearestBtn" class="px-10 py-4 rounded-full bg-blue-600/20 hover:bg-blue-600/40 border border-blue-500/30 backdrop-blur-md font-semibold text-lg transition-all hover:scale-105 hidden text-blue-100 shadow-[0_0_20px_rgba(59,130,246,0.2)]">
                üìç Show Nearest Bin on Map
            </button>

            <div class="grid md:grid-cols-2 gap-6 mt-8">
                <div id="directions" class="text-left text-lg bg-black/40 border border-white/5 p-6 rounded-3xl hidden flex-col justify-center shadow-inner"></div>
                <div id="map" class="hidden w-full shadow-2xl"></div>
            </div>

        </div>

        <div class="mt-20">
            <h2 class="text-3xl font-bold mb-10 text-slate-200 flex items-center justify-center gap-3">
                <span class="w-12 h-[2px] bg-emerald-500/50"></span> Our Team <span class="w-12 h-[2px] bg-emerald-500/50"></span>
            </h2>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mx-auto">
                <div class="glass-card p-6 rounded-3xl text-center">
                    <div class="w-20 h-20 mx-auto rounded-full bg-gradient-to-tr from-emerald-400 to-cyan-500 p-1 mb-4 shadow-lg">
                        <div class="w-full h-full bg-slate-900 rounded-full flex items-center justify-center text-3xl font-bold text-white">A</div>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-1">Adarsh M</h3>
                    <p class="text-emerald-400 text-sm font-medium tracking-widest">USN: 1VA23IS002</p>
                </div>
                
                <div class="glass-card p-6 rounded-3xl text-center">
                    <div class="w-20 h-20 mx-auto rounded-full bg-gradient-to-tr from-violet-400 to-fuchsia-500 p-1 mb-4 shadow-lg">
                        <div class="w-full h-full bg-slate-900 rounded-full flex items-center justify-center text-3xl font-bold text-white">K</div>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-1">Kavana H</h3>
                    <p class="text-violet-400 text-sm font-medium tracking-widest">USN: 1VA23IS045</p>
                </div>

                <div class="glass-card p-6 rounded-3xl text-center">
                    <div class="w-20 h-20 mx-auto rounded-full bg-gradient-to-tr from-blue-400 to-indigo-500 p-1 mb-4 shadow-lg">
                        <div class="w-full h-full bg-slate-900 rounded-full flex items-center justify-center text-3xl font-bold text-white">J</div>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-1">Janani V</h3>
                    <p class="text-blue-400 text-sm font-medium tracking-widest">USN: 1VA23IS038</p>
                </div>

                <div class="glass-card p-6 rounded-3xl text-center">
                    <div class="w-20 h-20 mx-auto rounded-full bg-gradient-to-tr from-yellow-400 to-orange-500 p-1 mb-4 shadow-lg">
                        <div class="w-full h-full bg-slate-900 rounded-full flex items-center justify-center text-3xl font-bold text-white">S</div>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-1">Shreya P Shetty</h3>
                    <p class="text-yellow-400 text-sm font-medium tracking-widest">USN: 1VA23IS099</p>
                </div>
            </div>
            
            <div class="mt-12 opacity-60 text-sm tracking-wide">
                &copy; 2026 EcoSort AI.
            </div>
        </div>

    </div>

<script>
// ================= AI MODEL URL =================
const URL = "https://teachablemachine.withgoogle.com/models/MpykLbJTu/";

// ================= BIN DATA =================
const CAMPUS_BINS=[
    {lat:13.168565579120187,lng:77.55920291621797,name:'Dustbin 1 (Canteen)',type:'blue'},
    {lat:13.169194402750207,lng:77.55910557037834,name:'Dustbin 2 (Girls Hostel)',type:'blue'},
    {lat:13.169982527694938,lng:77.5592728030967,name:'Dustbin 3 (Cafeteria)',type:'yellow'},
    {lat:13.168077974015965,lng:77.55863878912334,name:'Dustbin 4 (BB court)',type:'yellow'},
    {lat:13.167512008741621,lng:77.55889806553515,name:'Dustbin 5 (East gate)',type:'green'},
    {lat:13.168800000000000,lng:77.55850000000000,name:'Dustbin 6 (E-Waste Dropoff)',type:'red'} 
];

// Mapping exactly to your Teachable Machine class names
const BIN_MAPPING={
    "paper":   {color:'blue', name:'üü¶ BLUE BIN (Paper)'},
    "plastic": {color:'blue', name:'üü¶ BLUE BIN (Plastic)'},
    "metal":   {color:'yellow', name:'üü® YELLOW BIN (Metal)'},
    "e waste": {color:'red',  name:'üü• RED BIN (Hazardous/E-Waste)'}
};

let model,video,stream,map,tileLayer;
// Set to null initially. We will update these with real GPS later!
let userLat = null;
let userLng = null;

// INIT Custom Model
async function init(){
    try {
        const modelURL = URL + "model.json";
        const metadataURL = URL + "metadata.json";
        
        // Load the model and metadata
        model = await tmImage.load(modelURL, metadataURL);
        
        const loader = document.getElementById('loading');
        loader.innerHTML = '‚ú® Custom AI Model Ready';
        loader.classList.replace('text-emerald-300', 'text-teal-300');
        loader.classList.replace('animate-pulse', 'animate-none');
        setTimeout(()=> {
            loader.style.opacity = '0';
            setTimeout(()=> loader.style.display='none', 500);
        }, 1500);
    } catch(e) {
        document.getElementById('loading').textContent = '‚ö†Ô∏è Error loading custom model';
        console.error(e);
    }
}
init();

// CAMERA
const scanBtn = document.getElementById('scanBtn');
const videoContainer = document.getElementById('videoContainer');
const classifyBtn = document.getElementById('classifyBtn');
const result = document.getElementById('result');
const confidenceDiv = document.getElementById('confidence');
const binColor = document.getElementById('binColor');
const nearestBtn = document.getElementById('nearestBtn');
const mapDiv = document.getElementById('map');
const directions = document.getElementById('directions');

scanBtn.onclick=async()=>{
    video=document.getElementById('video');
    videoContainer.classList.remove('hidden');
    scanBtn.classList.add('hidden');

    try {
        stream=await navigator.mediaDevices.getUserMedia({
            video:{facingMode:'environment',width:640,height:480}
        });
        video.srcObject=stream;
    } catch(e) {
        result.innerHTML = '‚ö†Ô∏è Camera access denied or unavailable.';
        result.classList.replace('text-slate-400', 'text-red-400');
    }
};

// CLASSIFY WITH TEACHABLE MACHINE (SQUARE CROP FIX APPLIED)
classifyBtn.onclick=async()=>{
    classifyBtn.disabled=true;
    classifyBtn.innerHTML='<span class="animate-pulse">üîÑ Analyzing...</span>';

    // 1. Create a perfect square canvas (This fixes the AI distortion!)
    const canvas = document.createElement('canvas');
    canvas.width = 224; 
    canvas.height = 224;
    const ctx = canvas.getContext('2d');

    // 2. Do the math to crop only the center square of your video feed
    const size = Math.min(video.videoWidth, video.videoHeight);
    const startX = (video.videoWidth - size) / 2;
    const startY = (video.videoHeight - size) / 2;

    // 3. Draw that center square onto the canvas
    ctx.drawImage(video, startX, startY, size, size, 0, 0, 224, 224);

    // 4. Send the perfectly square canvas to the AI instead of the raw, stretched video
    const predictions = await model.predict(canvas);
    
    // 5. Find the prediction with the highest probability
    let highestPrediction = predictions.reduce((prev, current) => 
        (prev.probability > current.probability) ? prev : current
    );

    showResult(highestPrediction.className.toLowerCase(), highestPrediction.probability);

    classifyBtn.disabled=false;
    classifyBtn.innerHTML='üîç Classify Object';
    nearestBtn.classList.remove('hidden');
};

function showResult(wasteType, probability){
    // Fallback if class isn't in mapping somehow
    const bin = BIN_MAPPING[wasteType] || {color:'blue', name:'üü¶ BLUE BIN (General)'};
    
    result.innerHTML=`Identified as: <span class="text-white ml-2 uppercase bg-white/10 px-4 py-2 rounded-xl border border-white/20">${wasteType}</span>`;
    result.classList.replace('text-slate-400', 'text-emerald-300');
    
    confidenceDiv.innerHTML = `AI Confidence Score: ${(probability * 100).toFixed(1)}%`;
    confidenceDiv.classList.remove('hidden');
    
    binColor.classList.remove('hidden');
    // Trigger reflow for animation
    void binColor.offsetWidth; 
    binColor.textContent=bin.name;
    binColor.className=`text-2xl font-bold my-8 p-6 rounded-2xl border-4 ${bin.color} transition-all duration-500 transform scale-100 opacity-100`;
}

// MAP
function initMap(){
    map=L.map('map').setView([13.1686, 77.5590],18); // Default fallback view
    tileLayer=L.tileLayer(
        'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', 
        {maxZoom:22, attribution: '&copy; OpenStreetMap contributors'}
    ).addTo(map);
}

nearestBtn.onclick = () => {
    // 1. Change button text to show loading state
    const originalText = nearestBtn.innerHTML;
    nearestBtn.innerHTML = '<span class="animate-pulse">üìç Getting your GPS location...</span>';

    // 2. Ask the browser for real location
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            // SUCCESS: We got the GPS coordinates!
            (position) => {
                userLat = position.coords.latitude;
                userLng = position.coords.longitude;
                nearestBtn.innerHTML = originalText;
                calculateAndShowNearest(); // Run the math
            },
            // ERROR: User denied permission or GPS is off
            (error) => {
                console.warn("GPS Error: ", error.message);
                alert("‚ö†Ô∏è Could not get exact location. Using default campus center.");
                userLat = 13.1686; // Fallback to campus center
                userLng = 77.5590; // Fallback to campus center
                nearestBtn.innerHTML = originalText;
                calculateAndShowNearest(); // Run the math anyway
            },
            { enableHighAccuracy: true } // Ask for the most precise location
        );
    } else {
        alert("Geolocation is not supported by this browser.");
    }
};

// 3. Math logic wrapped in a function to call after GPS loads
function calculateAndShowNearest() {
    const el = document.getElementById('binColor');
    const binType = el.classList.contains('blue') ? 'blue' :
                    el.classList.contains('yellow') ? 'yellow' :
                    el.classList.contains('red') ? 'red' : 'green';

    const matchingBins = CAMPUS_BINS.filter(b => b.type === binType);

    if (matchingBins.length === 0) {
        alert("No bins of this type found nearby!");
        return;
    }

    // Math to find the closest bin based on the NEW real GPS coordinates
    const nearest = matchingBins.sort((a, b) => {
        return Math.sqrt((a.lat - userLat) ** 2 + (a.lng - userLng) ** 2) -
               Math.sqrt((b.lat - userLat) ** 2 + (b.lng - userLng) ** 2);
    })[0];

    showMapWithNearest(nearest);
    showDirections(nearest);
}

function showMapWithNearest(nearestBin){
    mapDiv.classList.remove('hidden');
    
    if(!map) {
        initMap();
    }

    map.setView([userLat,userLng],18);

    map.eachLayer(layer=>{
        if(layer instanceof L.Marker || layer instanceof L.CircleMarker){
            map.removeLayer(layer);
        }
    });

    L.marker([userLat,userLng],{
        icon:L.divIcon({
            html:'<div style="font-size: 24px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));">üßë</div>',
            iconSize:[30,30],
            className: 'bg-transparent border-0'
        })
    }).addTo(map).bindPopup('You are here');

    CAMPUS_BINS.forEach(bin=>{
        const binColorCode = bin.type === 'blue' ? '#3b82f6' : 
                             bin.type === 'yellow' ? '#eab308' : 
                             bin.type === 'red' ? '#ef4444' : '#22c55e';
        L.circleMarker([bin.lat,bin.lng],{
            radius:6,fillColor:binColorCode,color:'#fff',
            weight:2,fillOpacity:0.8
        }).addTo(map).bindPopup(bin.name);
    });

    const targetColorCode = nearestBin.type === 'blue' ? '#3b82f6' : 
                            nearestBin.type === 'yellow' ? '#eab308' : 
                            nearestBin.type === 'red' ? '#ef4444' : '#22c55e';
                            
    L.circleMarker([nearestBin.lat,nearestBin.lng],{
        radius:14,fillColor:targetColorCode,color:'#fff',
        weight:3,fillOpacity:1, className: 'animate-pulse'
    }).addTo(map).bindPopup(`<strong>üéØ NEAREST: ${nearestBin.name}</strong>`).openPopup();

    setTimeout(()=>map.invalidateSize(),300);
}

// DIRECTIONS
function showDirections(nearestBin){
    const dist=getDistance(userLat,userLng,nearestBin.lat,nearestBin.lng);
    directions.classList.remove('hidden');
    directions.classList.add('flex');
    directions.innerHTML=`
        <h4 class="text-emerald-400 font-bold mb-3 uppercase tracking-wider text-sm">Navigation Route</h4>
        <div class="space-y-2 text-slate-200">
            <p>üéØ Target: <strong class="text-white">${nearestBin.name}</strong></p>
            <p>üìè Distance: <strong class="text-white">${dist.toFixed(0)} meters</strong></p>
            <p>üß≠ Head <strong class="text-emerald-300">${getDirection(userLat,userLng,nearestBin.lat,nearestBin.lng)}</strong> to reach your destination.</p>
        </div>
    `;
}

function getDistance(lat1,lng1,lat2,lng2){
    const R=6371000;
    const dLat=(lat2-lat1)*Math.PI/180;
    const dLng=(lng2-lng1)*Math.PI/180;
    const a=Math.sin(dLat/2)**2+
          Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*
          Math.sin(dLng/2)**2;
    return R*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));
}

function getDirection(lat1,lng1,lat2,lng2){
    const dx=lng2-lng1;
    if(dx>0.0005) return 'East';
    if(dx<-0.0005) return 'West';
    const dy=lat2-lat1;
    if(dy>0.0005) return 'North';
    if(dy<-0.0005) return 'South';
    return 'Straight';
}

// STOP
document.getElementById('stopBtn').onclick=()=>{
    if(stream) stream.getTracks().forEach(t=>t.stop());
    videoContainer.classList.add('hidden');
    scanBtn.classList.remove('hidden');
    
    result.innerHTML='Awaiting scan input...';
    result.classList.replace('text-emerald-300', 'text-slate-400');
    
    confidenceDiv.classList.add('hidden');
    
    binColor.classList.add('hidden');
    binColor.classList.replace('opacity-100', 'opacity-0');
    binColor.classList.replace('scale-100', 'scale-95');
    
    nearestBtn.classList.add('hidden');
    mapDiv.classList.add('hidden');
    directions.classList.add('hidden');
    directions.classList.remove('flex');
    directions.innerHTML='';
};
</script>
</body>
</html>
